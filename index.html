<!DOCTYPE html>
<html lang="en" style="width:100%;height:100%;">

<head>
	<meta charset="utf-8">
	<title>BrowserForge</title>
	<script src="https://cjrtnc.leaningtech.com/4.1/loader.js"></script>
	<link rel="stylesheet" href="style.css">
	<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
</head>

<body>
	<header>
		<div class="desktop-only">
			<div class="container">
				<div class="intro">
					<label for="version-select">Select Version:</label>
					<select id="version-select"></select>
					<label for="mod-upload">Upload Mod ZIP:</label>
					<input type="file" id="mod-upload" accept=".zip" multiple />
					<label for="memory-select">Memory Limit:</label>
					<select id="memory-select">
						<option value="default">Default</option>
						<option value="512M">512 MB</option>
						<option value="1024M" selected>1 GB</option>
						<option value="2048M">2 GB</option>
						<option value="4096M">4 GB</option>
					</select>
					<br>
					<label for="opengl-toggle" style="display:inline-flex;align-items:center;">
						<input type="checkbox" id="opengl-toggle" style="margin-right:8px;"> Enable Java2D
						OpenGL (Experimental)
					</label>
					<div style="display:flex; gap:10px; margin-bottom:10px;">
						<div style="flex:1;">
							<label for="gc-select">Garbage Collector:</label>
							<select id="gc-select" style="width:100%; padding:5px;">
								<option value="">Default</option>
								<option value="-XX:+UseG1GC">G1GC</option>
								<option value="-XX:+UseParallelGC">Parallel</option>
								<option value="-XX:+UseConcMarkSweepGC">CMS</option>
							</select>
						</div>
						<div style="flex:1; display:flex; align-items:flex-end; gap:10px;">
							<label style="cursor:pointer; white-space:nowrap;">
								<input type="checkbox" id="aggressive-opts"> Aggressive Opts
							</label>
							<label style="cursor:pointer; white-space:nowrap;">
								<input type="checkbox" id="optimize-flags" checked> Optimize Flags
							</label>
						</div>
					</div>

					<label for="username">Username:</label>
					<input type="text" id="username" value="Player"
						style="margin-bottom:10px; width:100%; padding:5px;">

					<label for="custom-args">JVM Arguments (Auto-Generated + Custom):</label>
					<input type="text" id="custom-args" placeholder="-Dfoo=bar"
						style="margin-bottom:10px; width:100%; padding:5px;">

					<ul id="mod-list" style="margin:10px 0 0 0;"></ul>
					<button id="play-btn">Play!</button>

					<hr style="margin: 20px 0; border: 0; border-top: 1px solid #444;">

					<h3>Modpacks</h3>
					<div class="modpack-controls">
						<button id="create-modpack-btn">Create New Modpack</button>
						<input type="file" id="import-modpack-input" accept=".browserforge" style="display:none">
						<button id="import-modpack-btn">Import Modpack</button>
					</div>
					<div id="modpacks-list" class="modpacks-grid">
						<!-- Modpacks will be rendered here -->
						<p style="color:#aaa; font-style:italic;">No modpacks found. Create one to get started!</p>
					</div>

					<button id="load-aether-demo-btn">Load Aether demo</button>
					<small id="aether-demo-status" style="display:none;margin-left:8px;"></small>
					<small id="init-status" style="display:none;margin-left:8px;"></small>
					<p>Powered by CheerpJ</p>
					<p>This project is a web port of <a href="https://files.minecraftforge.net/"
							target="_blank">Minecraft Forge</a> (LGPL) for educational and historical purposes. It
						includes the Minecraft 1.2.5 game assets hosted in the project for demonstration. Forge is
						licensed under the <a href="https://www.gnu.org/licenses/lgpl-3.0.html" target="_blank">LGPL
							License</a>.</p>
					<p><strong>Disclaimer:</strong> Minecraft and all associated assets are copyrighted by <a
							href="https://www.microsoft.com/" target="_blank">Mojang Studios / Microsoft</a>. This
						project is not affiliated with or endorsed by Mojang / Microsoft. Users should respect the <a
							href="https://www.minecraft.net/en-us/terms" target="_blank">Minecraft EULA</a>.</p>
					<p>This project is intended for educational, archival, and demonstration purposes only.</p>
					<a href="https://github.com/National-Porting-Association/BrowserForge">View this project on
						Github</a>
				</div>
				<div id="modpack-modal" class="modal"
					style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; align-items:center; justify-content:center;">
					<div class="modal-content"
						style="background:#222; padding:20px; border-radius:8px; max-width:500px; width:90%; color:#fff; border:1px solid #444;">
						<h3 id="modal-title">Create Modpack</h3>
						<label>Name:</label>
						<input type="text" id="mp-name" style="width:100%; margin-bottom:10px; padding:5px;">

						<label>Description:</label>
						<textarea id="mp-desc"
							style="width:100%; margin-bottom:10px; padding:5px; height:60px;"></textarea>

						<div style="display:flex; gap:10px; margin-bottom:10px;">
							<div style="flex:1;">
								<label>Memory:</label>
								<select id="mp-memory" style="width:100%; padding:5px;">
									<option value="default">Default</option>
									<option value="512M">512 MB</option>
									<option value="1024M">1 GB</option>
									<option value="2048M">2 GB</option>
									<option value="4096M">4 GB</option>
								</select>
							</div>
							<div style="flex:1; display:flex; align-items:flex-end;">
								<label style="cursor:pointer;">
									<input type="checkbox" id="mp-opengl"> Enable OpenGL
								</label>
							</div>
						</div>

						<div style="display:flex; gap:10px; margin-bottom:10px;">
							<div style="flex:1;">
								<label>GC:</label>
								<select id="mp-gc" style="width:100%; padding:5px;">
									<option value="">Default</option>
									<option value="-XX:+UseG1GC">G1GC</option>
									<option value="-XX:+UseParallelGC">Parallel</option>
									<option value="-XX:+UseConcMarkSweepGC">CMS</option>
								</select>
							</div>
							<div style="flex:1; display:flex; align-items:flex-end;">
								<label style="cursor:pointer;">
									<input type="checkbox" id="mp-aggressive"> Aggressive Opts
								</label>
							</div>
						</div>

						<div style="display:flex; gap:10px; margin-bottom:10px;">
							<div style="flex:1;">
								<label>Width:</label>
								<input type="number" id="mp-width" value="854" style="width:100%; padding:5px;">
							</div>
							<div style="flex:1;">
								<label>Height:</label>
								<input type="number" id="mp-height" value="480" style="width:100%; padding:5px;">
							</div>
						</div>

						<label>Custom JVM Flags:</label>
						<input type="text" id="mp-flags" placeholder="-Dfoo=bar"
							style="width:100%; margin-bottom:10px; padding:5px;">

						<label>Icon (Optional):</label>
						<input type="file" id="mp-icon" accept="image/*" style="margin-bottom:10px;">

						<label>Mods (.zip or .jar):</label>
						<input type="file" id="mp-files" multiple accept=".zip,.jar" style="margin-bottom:10px;">
						<ul id="mp-file-list"
							style="margin-bottom:15px; font-size:0.9em; color:#ccc; max-height:100px; overflow-y:auto;">
						</ul>

						<div style="display:flex; justify-content:flex-end; gap:10px;">
							<button id="mp-cancel-btn" style="background:#555;">Cancel</button>
							<button id="mp-save-btn">Save Modpack</button>
						</div>
					</div>
				</div>

				<progress style="display: none"></progress>
				<div class="display"></div>
			</div>
		</div>
	</header>
	<script type="module" src="browserforge.js"></script>
</body>

</html>